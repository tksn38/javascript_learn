<!DOCTYPE html>
<html>
<meta charset="utf-8">
<title>hello07 regexForCheck</title>
<head>
<link rel="stylesheet" text="text/css" href="hello07.css">
</head>
<body>
<h1>Email Address</h1>

<form name="myForm" action="hello07.html" method="post" novalidate>
    <div class="form-group">
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required>
        <div id="email-error" class="error"></div>
    </div>
    <input type="submit" value="submit">
</form>

<script>
document.addEventListener('DOMContentLoaded',function() {
    const form = document.forms['myForm'];
    const emailInput = form['email'];
    const emailError = document.getElementById('email-error');

    emailInput.addEventListener('input',function() {
        validateEmail();
    });

    form.addEventListener('submit',function(event) {
        if (!validateEmail()) {
            event.preventDefault();
        } else {
            alert("valid email address.");
            event.preventDefault();
        }
    });

    function validateEmail() {
        const email = emailInput.value.trim();
        const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        
        if (email === '') {
            showError(emailInput,emailError,"please input email address");
            return false;
        }

        if (!regex.test(email)) {
            showError(emailInput,emailError,"please input VALID email address")
            return false;
        }

        showSuccess(emailInput,emailError);
        return true;
    }

    function showError(input, errorElement, message) {
        input.classList.add('invalid');
        errorElement.textContent = message;
        errorElement.classList.add('show');
    }

    function showSuccess(input, errorElement) {
        input.classList.remove('invalid');
        errorElement.textContent = '';
        errorElement.classList.remove('show');       
    }

});
</script>

</body>
</html>